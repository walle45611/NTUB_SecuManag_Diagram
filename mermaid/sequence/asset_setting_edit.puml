@startuml

actor User as "使用者"
participant Frontend
participant Backend
participant Database
participant Service as "風險計算服務"

User ->> Frontend: 點擊「編輯資產設定」
Frontend ->> Backend: GET /api/system/asset-settings/{setting_id}
Backend ->> Database: 讀取 asset_setting、變數與自訂欄位設定
Backend -->> Frontend: 回傳設定資料
Frontend ->> Frontend: 顯示編輯表單 (名稱、描述、策略值、公式編輯器、變數、運算符、自訂欄位)
User ->> Frontend: 修改並點擊「保存」
Frontend ->> Backend: PUT /api/system/asset-settings/{setting_id}
Backend ->> Database: 更新 asset_setting 設定資料
Backend ->> Service: 觸發重新計算風險 (所有資產)
Service ->> Database: 更新 risk_result 資料表
Backend -->> Frontend: 回傳更新結果
Frontend ->> Frontend: 顯示「保存成功」並重新載入資產列表
@enduml
