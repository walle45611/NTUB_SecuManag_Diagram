@startuml

package "Frontend" {
  [nginx (Static Files)]
}

package "Backend" {
  [Python API Service]
}

package "Messaging" {
  [RabbitMQ Broker]
  [Consumer Worker]
}

package "AI Module" {
  [Ollama Embedding Model]
  [RAG Query Service]
}

package "Database" {
  [PostgreSQL]
}

package "Storage" {
  [MinIO API]
  [MinIO Web]
}

package "External Services" {
  [Google SMTP Server]
  [OAuth Server]
}


Frontend --> Backend : REST API
Frontend --> "OAuth Server" : Authentication
Backend --> Messaging : Task Queue
Backend --> Storage : File Operations
Backend --> Database : CRUD Operations
Backend --> "AI Module" : AI Processing


"Ollama Embedding Model" --> "RAG Query Service" : Vector Embedding
"Consumer Worker" --> "RabbitMQ Broker" : Subscribe
"RabbitMQ Broker" --> "Consumer Worker" : Tasks
"Consumer Worker" --> Database : Query/Update
"Consumer Worker" --> "Google SMTP Server" : Send Email
"RAG Query Service" --> Database : Query Documents
"AI Module" --> Backend : Query Results

@enduml