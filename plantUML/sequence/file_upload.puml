@startuml
actor User as "使用者"
participant Frontend
participant Backend
participant Database
participant MinIO
participant Approval as "核准模組"

User ->> Frontend: 選擇檔案並點「上傳」
Frontend ->> Backend: POST /api/system/uploadfile_entity/?file_prefix={}&uuid={}

alt 上傳成功
    Backend ->> Database: INSERT uploadfile_entity_record(file_prefix={}&uuid={})
    Backend ->> MinIO: PUT 檔案到 MinIO Bucket
    MinIO -->> Backend: 確認檔案儲存成功
    Backend ->> Database: 更新 uploadfile_entity 狀態為已上傳
    Backend -->> Frontend: 回傳成功與文件 UUID
else 上傳失敗
    Backend -->> Frontend: 回傳錯誤訊息
end

Frontend -->> User: 顯示上傳結果
@enduml
